cmake_minimum_required (VERSION 3.12)

project (yocto_apps VERSION 2.0)

set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

add_executable(yscntrace yscntrace.cpp)
add_executable(yscnproc  yscnproc.cpp)
add_executable(yimgproc  yimgproc.cpp)
add_executable(ymshproc  ymshproc.cpp)

set_target_properties(yscntrace PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED YES)
set_target_properties(yscnproc  PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED YES)
set_target_properties(yimgproc  PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED YES)
set_target_properties(ymshproc  PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED YES)

target_link_libraries(yscntrace yocto_gl)
target_link_libraries(yscnproc  yocto_gl)
target_link_libraries(yimgproc  yocto_gl)
target_link_libraries(ymshproc  yocto_gl)

if(YOCTO_EMBREE)
  target_compile_definitions(yscntrace PUBLIC -DYOCTO_EMBREE)
  target_compile_definitions(yscnproc PUBLIC  -DYOCTO_EMBREE)
  target_compile_definitions(yimgproc PUBLIC  -DYOCTO_EMBREE)
  target_compile_definitions(ymshproc PUBLIC  -DYOCTO_EMBREE)
endif(YOCTO_EMBREE)

if(YOCTO_OPENGL)
  add_definitions(-DYOCTO_OPENGL)
  
  add_executable(yscnview    yscnview.cpp)
  add_executable(yimshproc   yimshproc.cpp)
  add_executable(yscnitrace  yscnitrace.cpp)
  add_executable(yscnitraces yscnitraces.cpp)
  add_executable(yimgview    yimgview.cpp)
  add_executable(yimgviews   yimgviews.cpp)

  if(YOCTO_EMBREE)
    target_compile_definitions(yscnview PUBLIC -DYOCTO_EMBREE)
    target_compile_definitions(yimshproc PUBLIC  -DYOCTO_EMBREE)
    target_compile_definitions(yscnitrace PUBLIC  -DYOCTO_EMBREE)
    target_compile_definitions(yscnitraces PUBLIC  -DYOCTO_EMBREE)
    target_compile_definitions(yimgview PUBLIC  -DYOCTO_EMBREE)
    target_compile_definitions(yimgviews PUBLIC  -DYOCTO_EMBREE)
  endif(YOCTO_EMBREE)

  set_target_properties(yscnview     PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED YES)
  set_target_properties(yimshproc    PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED YES)
  set_target_properties(yscnitrace   PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED YES)
  set_target_properties(yscnitraces  PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED YES)
  set_target_properties(yimgview     PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED YES)
  set_target_properties(yimgviews    PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED YES)

  target_link_libraries(yscnview    yocto_gl yocto_gui ${GL_EXTRA_LIBRARIES})
  target_link_libraries(yimshproc   yocto_gl yocto_gui ${GL_EXTRA_LIBRARIES})
  target_link_libraries(yscnitrace  yocto_gl yocto_gui ${GL_EXTRA_LIBRARIES})
  target_link_libraries(yscnitraces yocto_gl yocto_gui ${GL_EXTRA_LIBRARIES})
  target_link_libraries(yimgview    yocto_gl yocto_gui ${GL_EXTRA_LIBRARIES})
  target_link_libraries(yimgviews   yocto_gl yocto_gui ${GL_EXTRA_LIBRARIES})
endif(YOCTO_OPENGL)
